{% extends 'base.html' %}
{%load static%}
{% block content %}
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Material+Icons">
<style>
  .col-md-12 , .p-4
  {
    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)
  }
  .custom-scrollbar-css {
    background-color: #FFF;
    height: 650px;
    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
    overflow-y: auto;
    overflow-x: hidden;
  }
  .custom-scrollbar-css::-webkit-scrollbar {
    width: 5px;
  }

  /* scrollbar track */
  .custom-scrollbar-css::-webkit-scrollbar-track {
    background: #eee;
  }

  /* scrollbar handle */
  .custom-scrollbar-css::-webkit-scrollbar-thumb {
    border-radius: 1rem;
    background-color: #28a745;
  }
  .nav-itemx{
    margin: 10px;
    margin-top: 25px;
    margin-left: 3px;
  }
  .nav-itemx a {
    padding-bottom: 15px;
    color:black;

  }
  .nav-itemx a:hover {
    color: #28a745;
  }
  
  .nav-itemx a.active{
    color: #28a745;
  }
  .link {
      text-align:left;
      margin-left: 20px;
      color:black;
      font-size: 18px;
      min-width: 250px !important;
      overflow: hidden;
  }

  /* .progress-bar h5{
    padding-left: 420px;
    padding-top: 5px;
    font-size:13px;
    color:black
    } */
  .progress{
      width :100%;
      height:10px;
    }
  .progress-bar{
    height:15px;

  }
  .app_prop{
    float: left;
    margin-left: 15px;
  }
  .app_prop small{
    margin: 0px 10px;
  }
  
</style>

<div class="site-section bg-light">
  <div class="container">
    {% if messages %}
      {% for message in messages %}
        <div class="alert alert-{{message.tags}}" style="text-align:center" id="mess">
            {{message}}
        </div>
      {% endfor %}
    {% endif %}
    {% if job is not None %}
    <div class="row">
      <div class="col-md-12 col-lg-8 mb-5">
        <div class="p-5 bg-white">

          <div class="mb-4 mb-md-5 mr-5">
            <div class="job-post-item-header d-flex align-items-center">
              <h2 class="mr-3 text-black h4">{{job.jobtitle}}</h2>
              <div class="badge-wrap">
              <span class="border border-warning text-warning py-1 px-3 rounded">{{job.jobtype}}</span>
              </div>
            </div>
            <div class="job-post-item-body d-block d-md-flex">
              <div class="mr-3"><span class="fl-bigmug-line-portfolio23"></span>{{job.joblocation}}</div>
              <div><span class="fl-bigmug-line-big104"></span> <span>{{job.city}} , {{job.Area}}</span></div>
            </div>
          </div>
          <p style="word-wrap: break-word;">{{job.job_description}}</p>
          <p><strong>Career level:</strong> {{job.careerlevel}}</p>
          <p><strong>Years Of Experience:</strong> {{job.year_of_experience}}</p>
          <p><strong>Salary Range:</strong> {{job.year_of_experience}}</p>
          <p><strong>Years Of Experience:</strong> ${{job.salary_range1}} - {{job.salary_range2}}</p>
          <p><strong>Number of Vacancies::</strong> {{job.num_vacancies}}</p>
          <p><strong>Job Type:</strong> {{job.jobtype}}</p>
          <p style="width: fit-content;width: -moz-fit-content;word-wrap: break-word;"><strong>Skills:</strong>
            {% if job.skills is not None %}
              {%for skill in skills%}
              <span style="background-color: rgb(0, 70, 70);color: white;margin-right: 5px;padding: 3px 9px;border-radius: 5px;">{{skill}}</span>
              {% endfor %}
            {%endif%}
          </p>
          <p style="color:red"><strong>Deadline:</strong> {{job.deadline}}</p>
          <!-- <p class="mt-5"><a href="#" class="btn btn-primary  py-2 px-4">Apply Job</a></p> -->
        </div>
      </div>

      <div class="col-lg-4">
        <div class="p-4 mb-3 bg-white">
          <h3 class="h5 text-black mb-3">Control</h3>
          <p>Be careful while control any job !</p>
          <p>
          
            {%if job.status != 'closed'%}
              <a href="/company/status/{{job.id}}" class="btn btn-dark  py-1 px-3"
                id="state" data-toggle="modal" data-target="#exampleModal">Close</a>
            {%else%}
              <a href="/company/status/{{job.id}}" class="btn btn-warning  py-1 px-3"
                style="color: white" id="state" data-toggle="modal" data-target="#exampleModal">
              Open</a>
            {%endif%}
            <a href="/company/edit/{{job.id}}" class="btn btn-info  py-1 px-3">Edit</a>
            <a href="/company/delete/{{job.id}}" class="btn btn-danger  py-1 px-3"
            data-toggle="modal" data-target="#exampleModal" id="delete">Delete</a>
          </p>
        </div>
      </div>
    </div>
    {%endif%}
  </div>
</div>

<!-------------________RESULTS________------------->

<div class="site-section bg-light">
  <div class="container">
    <div  class="custom-scrollbar-css p-2">
      <div class="row justify-content-center text-center mb-5">
        <div class="col-md-6" data-aos="fade" >
          <div class="row justify-content-center">
            <div class="profile-tabs justify-content-center">
              <ul class="nav nav-pills nav-pills-icons justify-content-center" role="tablist">
                <li class="nav-itemx">
                    <a  class="active" href="#studio" role="tab" data-toggle="tab" >
                      <i class="fa fa-align-justify fa-lg" ></i>
                    <br>ALL</a>
                </li>
                <li class="nav-itemx">
                  <a  href="#works" role="tab" data-toggle="tab">
                    <i class="fa fa-check fa-lg"></i>
                  <br> Accepted</a>
                </li>
                <li class="nav-itemx">
                  <a  href="#favorite" role="tab" data-toggle="tab">
                    <i class="fa fa-times fa-lg"></i>
                  <br>Rejected</a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      <!-- _____________CONTENT OF ALL tab _________________-->
      <div class="row justify-content-center">
        <div style="width: 80%;" data-aos="fade" >
          <div class="tab-content tab-space" >
            <div class="tab-pane active text-center gallery" id="studio">
              {% for appl in applicants %}
              <div style="display: inline-block;width: 100%;margin-bottom: 10px;">
                <div class="row" >
                  <a class="link" href="#">{{appl.aplcnt}}</a> 
                </div>
                
                <div class="progress">
                  <div class="progress-bar" role="progressbar" aria-valuenow="{{appl.skills_rslt}}" aria-valuemin="0" aria-valuemax="100">
                  </div>              
                </div>
                <div class="app_prop">
                  <small><a href="../../../media/{{appl.resume}}">Download Resume <i class="fas fa-file-download"></i></a></small>
                  |                  
                  <small><a href="#">Accept <i class="fas fa-check-circle"></i></a></small>
                  |                  
                  <small class="rej"><a href="#">Reject <i class="fas fa-times-circle"></i></a></small>
                  |                  
                  <small class="rej"><a data-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">More Details <i class="fas fa-sort-down"></i></a></small>
                  <script>document.write(x=x+1)</script>
                </div>
                <small style="margin: 0px 10px;float: right;" >{{appl.skills_rslt}}%</small>
              </div>
              <div class="collapse" id="collapseExample">
                <div class="card card-body">
                  <div style="text-align: left;">
                    Skills Founded: <ul> <li>skill1</li><li>skill2</li><li>skill3</li></ul>
                    Anlysis: this resumes seems good for this job Anim pariatur cliche reprehenderit
                  </div>
                </div>
              </div>
              
              <br>
              {% endfor %}
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>




<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      {%if job.status == 'closed'%}
      <form method="POST" action="/company/status_open/{{job.id}}">
        {% csrf_token %}
      <div class="modal-body" id="contentmessage">
          <label>Please select the date to close this post </label>
          <input type="date" name="deadline" id="deadline">
      </div>
      <div class="modal-footer">
        <button id="Soo" type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
        <button type="submit" class="btn btn-primary" id="action" style="color: white;">OK</button>
      </div>
     </form>

      {% else %}
      <div class="modal-body" id="contentmessage">
        <label> Are you sure to close this post ?</label>
      </div>
      <div class="modal-footer">
        <button id="Soo" type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
        <a href="/company/status/{{job.id}}" id="action" type="button" class="btn btn-primary" style="color: white;">OK</a>
      </div>
      {% endif %}
    </div>
  </div>
</div>




<script src='https://kit.fontawesome.com/a076d05399.js'></script>

<script>
  var today = new Date();
	var dd = today.getDate();
	var mm = today.getMonth()+1; //January is 0!
	var yyyy = today.getFullYear();
	if(dd<10){
			dd='0'+dd
		} 
		if(mm<10){
			mm='0'+mm
		} 

	today = yyyy+'-'+mm+'-'+dd;
	document.getElementById("deadline").setAttribute("min", today);

  $(document).on("click","#delete",function(){
    $('#exampleModalLabel').css('color','red').text('Delete \"{{job.jobtitle}}\" Job !!');
    $('#contentmessage').text('Are you sure to Delete this job ?');
    $('#action').attr('href','/company/delete/{{job.id}}');
  });
  $(function(){
    $('#mess').delay(4000).fadeOut('fast')
  });
  
  $(function() {
    /* Rounded Dark */
    $("#content-2").mCustomScrollbar({
      theme: "rounded-dark"
    });
  });

  //progress bar
  $(document).ready(function() {
      $('.progress .progress-bar').css("width",
          function() {
              return $(this).attr("aria-valuenow") + "%";
          }
        )
    });
</script>

{% endblock content %}